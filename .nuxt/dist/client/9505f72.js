(window.webpackJsonp=window.webpackJsonp||[]).push([[45,20,22],{559:function(e,t,n){"use strict";n.r(t);var r=n(246),o=n(139),l=n(243),c=n(75),component=Object(c.a)({},(function(){var e=this._self._c;return e(r.a,{attrs:{color:"primary",dark:""}},[e(o.c,[this._v("\n    ກະລຸນາລໍຖ້າ...\n    "),e(l.a,{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)}),[],!1,null,null,null);t.default=component.exports},564:function(e,t,n){"use strict";n.r(t);var r=n(541),o=n(246),l=n(139),c=n(244),d=n(554),_={props:{message:{type:String,default:""}},methods:{toggleDialog:function(){this.$emit("closedialog")}}},f=n(75),component=Object(f.a)(_,(function(){var e=this,t=e._self._c;return t(o.a,[t(l.d,{staticClass:"text-h5 grey lighten-2"},[e._v(" ຂໍ້ຄວາມ ")]),e._v(" "),t(l.c,[e._v("\n    "+e._s(e.message)+"\n  ")]),e._v(" "),t(c.a),e._v(" "),t(l.a,[t(d.a),e._v(" "),t(r.a,{attrs:{color:"primary",text:""},on:{click:e.toggleDialog}},[e._v(" ຕົກລົງ ")])],1)],1)}),[],!1,null,null,null);t.default=component.exports},624:function(e,t,n){var content=n(680);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(16).default)("0a9fef00",content,!0,{sourceMap:!1})},640:function(e,t,n){"use strict";n.r(t);var r=n(541),o=n(246),l=n(139),c=n(552),d=n(568),_=n(569),f=n(56),m=n(554),v=n(86),x=n(38),h=(n(140),n(21),n(47),{props:{userId:{type:Number,requiret:!0,default:0},cusBalance:{type:Number,requiret:!0,default:0}},data:function(){return{loaddata:[],isloading:!1,valid:!0,message:null,dialogMessage:!1,form_data:{txn_his_id:1e3,txn_id:1e3,txn_type:1004,txn_his_amount:1e4,user_id:this.userId,user_balance:this.cusBalance,txn_his_inputter:this.$store.getters.loggedInUser.id,txn_his_date:"2021-09-25 00:00:00"},rule:{idRules:[function(e){return!!e||"ໄອດີ is required"}],nameRules:[function(e){return!!e||"ຊຶ່ is required"}],amountRules:[function(e){return!!e||"ກລນ ໃສ່ຈຳນວນ is required"}],passRules:[function(e){return!!e||"ລະຫັດຜ່ານ is required"},function(e){return e.length<=10||"ລະຫັດຜ່ານ ຈຳກັດແຕ່ 10"}],walletRules:[function(e){return!!e||"ວົງເງິນ is required"}],txnRule:[function(e){return!!e||"ກະລຸນາເລືອກ ລາຍການທຸລະກຳ is required"}]}}},created:function(){var e=this;return Object(x.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:case"end":return t.stop()}}),t)})))()},watch:{userId:function(e){this.form_data.user_id=e},message:function(e){this.dialogMessage=null!=e}},methods:{selectChange:function(e){console.log("SELECT: "+e),this.form_data.txn_id=e},submitDatas:function(){var e=this;return Object(x.a)(regeneratorRuntime.mark((function t(){var n,r,o,l,header;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isloading=!0,console.log("submitOut"),e.$refs.form.validate()){t.next=5;break}return e.isloading=!1,t.abrupt("return");case 5:if(console.log("submitIn"),n=e.form_data.user_balance,r=e.form_data.txn_his_amount,o=e.$store.getters.loggedInUser.token,1006!==e.form_data.txn_id){t.next=15;break}if(!(r>n)){t.next=15;break}return e.isloading=!1,e.message="ຍອດເງິນໃນບັນຊີ ບໍ່ພຽງພໍ",console.log("Biger"),t.abrupt("return");case 15:if(l="/txn_his_",header={headers:{"Content-Type":"application/json",Authorization:"Bearer "+o}},!e.isedit){t.next=23;break}return t.next=20,e.$axios.put(l+"e",e.form_data,header).then((function(t){e.message=t.data})).catch((function(t){e.message="Error: "+t}));case 20:e.isloading=!1,t.next=26;break;case 23:return t.next=25,e.$axios.post(l+"i",e.form_data,header).then((function(t){e.message=t.data})).catch((function(t){e.message="Error: "+t}));case 25:e.isloading=!1;case 26:e.fetchData();case 27:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return Object(x.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("txn_f").then((function(t){e.loaddata=t.data.map((function(e){return console.log(e.txn_id),{txn_id:e.txn_id,txn_type:e.txn_type,txn_name:e.txn_name,txn_amount:e.txn_amount,txn_user_id:e.txn_user_id,txn_inputter:e.txn_inputter,txn_date:e.txn_date,function:e.txn_id}}))})).catch((function(t){e.message=t,console.log("Error: "+t)}));case 2:case"end":return t.stop()}}),t)})))()},validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},formatNum:function(e){return(new Intl.NumberFormat).format(e)}}}),k=n(75),component=Object(k.a)(h,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(d.a,{attrs:{"max-width":"300px",persistent:""},model:{value:e.dialogMessage,callback:function(t){e.dialogMessage=t},expression:"dialogMessage"}},[t("dialog-classic-message",{attrs:{message:e.message},on:{closedialog:function(t){e.message=null}}})],1),e._v(" "),t(d.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.isloading,callback:function(t){e.isloading=t},expression:"isloading"}},[t("loading-indicator")],1),e._v(" "),t(o.a,[t(l.d,[e._v("\n      ຈັດການ Wallet "+e._s(e.form_data.user_id||"null")+" balance:\n      "+e._s(e.form_data.user_balance))]),e._v(" "),t(c.a,[t(_.a,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(v.a,{attrs:{counter:10,rules:e.rule.idRules,label:"ໄອດີ",required:"",disabled:""},model:{value:e.form_data.user_id,callback:function(t){e.$set(e.form_data,"user_id",t)},expression:"form_data.user_id"}}),e._v(" "),t(f.a,{attrs:{items:e.loaddata,"item-value":function(e){return e.txn_id},"item-text":function(e){return e.txn_id+" - "+e.txn_name},"append-outer-icon":"mdi-map","menu-props":"auto","hide-details":"",label:"ເລືອກທຸລະກຳ","single-line":"",rules:e.rule.txnRule},on:{change:e.selectChange},model:{value:e.form_data.txn_type,callback:function(t){e.$set(e.form_data,"txn_type",t)},expression:"form_data.txn_type"}}),e._v(" "),t(v.a,{attrs:{counter:10,rules:e.rule.amountRules,label:"ຈຳນວນເງິນ: "+e.formatNum(e.form_data.txn_his_amount),required:""},model:{value:e.form_data.txn_his_amount,callback:function(t){e.$set(e.form_data,"txn_his_amount",t)},expression:"form_data.txn_his_amount"}})],1),e._v("\n      "+e._s(e.userId)+"\n      "),e._t("default")],2),e._v(" "),t(l.a,[t(m.a),e._v(" "),t(r.a,{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v(" ລ້າງຂໍ້ມູນ ")]),e._v(" "),t(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.$emit("closewallet")}}},[e._v("\n        ປິດ\n      ")]),e._v(" "),t(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:e.submitDatas}},[e._v(" ບັນທຶກ ")])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{DialogClassicMessage:n(564).default,LoadingIndicator:n(559).default})},679:function(e,t,n){"use strict";n(624)},680:function(e,t,n){var r=n(15)((function(i){return i[1]}));r.push([e.i,'.grey[data-v-523df5d4],.text-h5[data-v-523df5d4]{font-family:"Noto Sans Lao"}',""]),r.locals={},e.exports=r},719:function(e,t,n){"use strict";n.r(t);var r=n(541),o=n(246),l=n(139),c=n(623),d=n(552),_=n(710),f=n(568),m=n(244),v=n(569),x=n(134),h=n(554),k=n(86),w=n(79),R=n(565),y=(n(29),n(256),n(38)),$=(n(76),n(573),n(4),n(65),n(109),n(47),n(140),{middleware:"auths",data:function(){return{wallet:!1,isedit:!1,dialog:!1,isloading:!1,dialogForm:!1,message:"",valid:!0,name:"",search:"",form_data:{cus_id:"1XXX",cus_pass:"pasw1ss1",cus_name:"cmeedit",cus_tel:"99884dd",cus_email:"@email.com",cus_balance:0,cus_active:!1},loaddata:[],headers:[{text:"ໄອດີ",align:"center",value:"cus_id"},{text:"ຊື່ສະມາຊິກ",align:"center",value:"cus_name"},{text:"ເບີໂທ",align:"center",value:"cus_tel"},{text:"email",align:"center",value:"cus_email"},{text:"ຍອດເງິນ",align:"center",value:"cus_balance"},{text:"active",align:"end",value:"cus_active",sortable:!1},{text:"ຟັງຊັ່ນ",align:"end",value:"function",sortable:!1},{text:"ຟັງຊັ່ນ",align:"end",value:"wallet",sortable:!1}],rule:{idRules:[function(e){return!!e||"ໄອດີ is required"}],nameRules:[function(e){return!!e||"ຊຶ່ is required"}],passRules:[function(e){return!!e||"ລະຫັດຜ່ານ is required"},function(e){return e.length<=10||"ລະຫັດຜ່ານ ຈຳກັດແຕ່ 10"}],walletRules:[function(e){return!!e||"ວົງເງິນ is required"}]}}},created:function(){var e=this;return Object(y.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchData();case 2:case"end":return t.stop()}}),t)})))()},watch:{message:function(e){this.dialog=null!=e},isedit:function(e){e||(this.form_data.cus_id="1XXX")}},methods:{walletAction:function(e){console.log("Wallet: "+e.cus_id),console.log("Bal: "+e.cus_balance),this.form_data.cus_id=e.cus_id,this.form_data.cus_balance=parseInt(e.cus_balance.replaceAll(",","")),console.log("Int: "+parseInt(e.cus_balance.replaceAll(",","")).toString())},editItem:function(e){console.log(e.cus_id),this.form_data=this.loaddata.find((function(t){return t.cus_id===e.cus_id})),this.dialogForm=!0},validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},submitDatas:function(){var e=this;return Object(y.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isloading=!0,console.log("submitOut"),e.$refs.form.validate()){t.next=5;break}return e.isloading=!1,t.abrupt("return");case 5:if(console.log("submitIn"),n="/customer_",!e.isedit){t.next=13;break}return t.next=10,e.$axios.put(n+"e",e.form_data).then((function(t){e.message=t.data})).catch((function(t){e.message="Error: "+t}));case 10:e.isloading=!1,t.next=16;break;case 13:return t.next=15,e.$axios.post(n+"i",e.form_data).then((function(t){e.message=t.data})).catch((function(t){e.message="Error: "+t}));case 15:e.isloading=!1;case 16:e.fetchData();case 17:case"end":return t.stop()}}),t)})))()},fetchData:function(){var e=this;return Object(y.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isloading=!0,t.next=3,e.$axios.get("customer_f").then((function(t){e.loaddata=t.data.map((function(e){return console.log(e.cus_id),{cus_id:e.cus_id,cus_pass:e.cus_pass,cus_name:e.cus_name,cus_tel:e.cus_tel,cus_email:e.cus_email,cus_balance:Intl.NumberFormat().format(e.CREDIT-(e.ORDER_DEBIT+e.DEBIT)),cus_active:e.cus_active,function:e.cus_id,wallet:e.cus_id}}))})).catch((function(t){e.message=t,console.log("Error: "+t)}));case 3:e.isloading=!1;case 4:case"end":return t.stop()}}),t)})))()}}}),I=(n(679),n(75)),component=Object(I.a)($,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-center"},[t(f.a,{attrs:{"max-width":"300px",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t("dialog-classic-message",{attrs:{message:e.message},on:{closedialog:function(t){e.message=null}}})],1),e._v("\n  "+e._s(e.form_data.cus_id)+"\nbalance:  "+e._s(e.form_data.cus_balance)+"\n  "),t(f.a,{attrs:{"max-width":"300px"},model:{value:e.wallet,callback:function(t){e.wallet=t},expression:"wallet"}},[t("wallet",{attrs:{"user-id":e.form_data.cus_id,"cus-balance":e.form_data.cus_balance},on:{closewallet:function(t){e.wallet=!1}}})],1),e._v(" "),t(f.a,{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.isloading,callback:function(t){e.isloading=t},expression:"isloading"}},[t("loading-indicator")],1),e._v(" "),t(f.a,{attrs:{"max-width":"600px"},model:{value:e.dialogForm,callback:function(t){e.dialogForm=t},expression:"dialogForm"}},[t(o.a,[t(l.d),e._v(" "),t(l.c,[t(d.a,[t(v.a,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(k.a,{attrs:{counter:10,rules:e.rule.idRules,label:"ໄອດີລູກຄ້າ",required:"",disabled:""},model:{value:e.form_data.cus_id,callback:function(t){e.$set(e.form_data,"cus_id",t)},expression:"form_data.cus_id"}}),e._v(" "),t(k.a,{attrs:{counter:10,rules:e.rule.nameRules,label:"ຊື່ລູກຄ້າ",required:""},model:{value:e.form_data.cus_name,callback:function(t){e.$set(e.form_data,"cus_name",t)},expression:"form_data.cus_name"}}),e._v(" "),t(k.a,{attrs:{counter:10,rules:e.rule.passRules,label:"ລະຫັດຜ່ານ",required:"",type:e.isedit?"password":""},model:{value:e.form_data.cus_pass,callback:function(t){e.$set(e.form_data,"cus_pass",t)},expression:"form_data.cus_pass"}}),e._v(" "),t(k.a,{attrs:{counter:10,rules:e.rule.nameRules,label:"ເບີໂທ",required:""},model:{value:e.form_data.cus_tel,callback:function(t){e.$set(e.form_data,"cus_tel",e._n(t))},expression:"form_data.cus_tel"}}),e._v(" "),t(k.a,{attrs:{counter:10,rules:e.rule.nameRules,label:"ອີເມວ",required:""},model:{value:e.form_data.cus_email,callback:function(t){e.$set(e.form_data,"cus_email",e._n(t))},expression:"form_data.cus_email"}}),e._v(" "),t(c.a,{attrs:{label:"ເປິດໃຊ້ງານທັນທີ"},model:{value:e.form_data.cus_active,callback:function(t){e.$set(e.form_data,"cus_active",t)},expression:"form_data.cus_active"}})],1)],1)],1),e._v(" "),t(l.a,[t(h.a),e._v(" "),t(r.a,{staticClass:"mr-4",attrs:{color:"error"},on:{click:e.reset}},[e._v(" ລ້າງຂໍ້ມູນ ")]),e._v(" "),t(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogForm=!1}}},[e._v("\n          ປິດ\n        ")]),e._v(" "),t(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:e.submitDatas}},[e._v("\n          ບັນທຶກ\n        ")])],1)],1)],1),e._v(" "),t(o.a,[t(l.d,[t(k.a,{attrs:{"append-icon":"mdi-magnify",label:"ຊອກຫາ","single-line":"","hide-detailsx":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),e.loaddata?t(_.a,{attrs:{headers:e.headers,search:e.search,items:e.loaddata},scopedSlots:e._u([{key:"top",fn:function(){return[t(w.a,{attrs:{flat:""}},[t(R.a,[e._v("ລູກຄ້າ: "+e._s(e.loaddata.length))]),e._v(" "),t(m.a,{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),t(h.a),e._v(" "),t(r.a,{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(t){e.dialogForm=!0,e.isedit=!1}}},[e._v("\n            ສ້າງໃຫມ່\n          ")])],1)]},proxy:!0},{key:"item.cus_active",fn:function(n){var r=n.item;return[t(c.a,{attrs:{disabled:""},model:{value:r.cus_active,callback:function(t){e.$set(r,"cus_active",t)},expression:"item.cus_active"}})]}},{key:"item.function",fn:function(n){var r=n.item;return[t(x.a,{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){e.editItem(r),e.isedit=!0}}},[e._v("\n          mdi-pencil\n        ")])]}},{key:"item.wallet",fn:function(n){var o=n.item;return[t(r.a,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.walletAction(o),e.wallet=!0}}},[t("i",{staticClass:"fas fa-wallet"})])]}}],null,!0)}):e._e()],1)],1)}),[],!1,null,"523df5d4",null);t.default=component.exports;installComponents(component,{DialogClassicMessage:n(564).default,Wallet:n(640).default,LoadingIndicator:n(559).default})}}]);